{% extends 'base.html.twig' %}

{% block title %}
  Blog index
{% endblock %}

{% block body %}
  <link href="{{ asset('css/main.css') }}" rel="stylesheet" />
  <!-- start banner Area -->
  <section class="about-banner paralax-mf bg-image" style="background-image:  url({{asset('../img/blog.jpg')}}); ">
    <div class="overlay-itro"></div>
    <div class="container">
      <div class="row d-flex align-items-center justify-content-center">
        <div class="about-content col-lg-12">
          <h1 class="text-white">Blog</h1>
          <p class="text-white link-nav">
            <a href="{{ path('app_home') }}">Home</a>
            <span class="lnr lnr-arrow-right"></span>
            <a href="{{ path('app_blog_index') }}">Blog</a>
          </p>
        </div>
      </div>
    </div>
  </section>
  <!-- End banner Area -->

  <!-- / Section Blog-Single Star / -->
  <section class="blog-wrapper sect-pt4" id="blog">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="row row-cols-1 row-cols-md-2 g-4">
            {% for blog in blogs %}
              <div class="col-6 md-9 mt-4">
                <div class="card">
                  <img src="{{ asset('blogImage/' ~ blog.image) }}" class="card-img-top" alt="Image" style="width: 100%;"/>
                  <div class="card-body">
                    <a href="{{ path('app_blog_show', { id: blog.id }) }}"><h5 class="card-title">{{ blog.title }}</h5></a>
                    <span class="d-inline-block" style="width: 250px; height:100px;"><p class="card-text"> {% autoescape %}
                              {{ blog.description|striptags('</br>')|raw | slice(0, 195) }}
                              {% endautoescape %}</p></span>
                    <br>
                    <a href="{{ path('app_blog_show', { id: blog.id }) }}" class="btn btn-outline-danger btn-sm">Read more</a>
                    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                         <a href="{{ path('app_blog_edit', { id: blog.id }) }}" class="btn btn-outline-primary btn-sm float-right">Edit</a>
                    {% endif %}                 
                  </div>
                  <div class="card-footer">
                    <small class="text-muted">
                      <div class="text-right">
                        <span class="ion-ios-clock-outline"></span>
                        {{ blog.date|date('d-M-Y') }}
                      </div>
                    </small>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="col-md-4">
          <div class="widget-sidebar sidebar-search">
            <h5 class="sidebar-title">Search</h5>
            <div class="sidebar-content">
              <form>
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search for..." aria-label="Search for..." />
                  <span class="input-group-btn"><button class="btn btn-secondary btn-search" type="button"><span class="ion-android-search"></span></button></span>
                </div>
              </form>
            </div>
          </div>
          <div class="widget-sidebar">
            <h5 class="sidebar-title">Recent Post</h5>
            <div class="sidebar-content">
              <ul class="list-sidebar">
              {% for blog in blogs %}
                <li>
                 <a href="{{ path('app_blog_show', { id: blog.id }) }}">{{blog.title}}</a>
                </li>
                {% endfor  %}
              </ul>
            </div>
          </div>
          <div class="widget-sidebar">
            <h5 class="sidebar-title">Archives</h5>
            <div class="sidebar-content">
              <ul class="list-sidebar">
              {% for blog in blogs %}
                <li>
                  <a href="{{ path('app_blog_show', { id: blog.id }) }}">{{ blog.date|date('D d-m-Y H:i') }}</a>
                </li>
              {% endfor  %}
              </ul>
            </div>
          </div>
          <div class="widget-sidebar widget-tags">
            <h5 class="sidebar-title">Tags</h5>
            <div class="sidebar-content">
              <ul>
              {% for blog in blogs %}
                <li>
                  <a href="{{ path('app_blog_show', { id: blog.id }) }}">{{blog.category}}</a>
                </li>
                {% endfor  %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- / Section Blog-Single End / -->
{% if is_granted('IS_AUTHENTICATED_FULLY') %}
  <div class="container">
    <div class="row">
        <a href="{{ path('app_blog_new') }}" class="btn btn-outline-primary">Create new</a>
    </div>
  </div>
{% endif %}
{% endblock %}
